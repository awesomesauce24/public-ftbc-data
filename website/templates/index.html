{% extends "base.html" %}

{% block title %}FTBC Wiki - Browse{% endblock %}

{% block content %}
<div class="page-header">
    <h1>ðŸŽ® FTBC Wiki</h1>
    <p>Complete guide to realms and collectible objects</p>
    <input type="text" id="searchInput" placeholder="Search realms or objects..." class="search-box">
</div>

<div class="realms-grid" id="realmsContainer">
    {% for realm_name, objects in realms.items() %}
    <div class="realm-card">
        <h2><a href="/realm/{{ realm_name }}">{{ realm_name }}</a></h2>
        <div class="objects-preview">
            {% for obj in objects[:5] %}
            <div class="object-item">
                <div class="object-name">{{ obj.ObjectName }}</div>
                <span class="difficulty {{ obj.Difficulty.lower() }}">{{ obj.Difficulty }}</span>
                <div class="description">{{ obj.Description }}</div>
            </div>
            {% endfor %}
            {% if objects|length > 5 %}
            <div class="more-text">+ {{ objects|length - 5 }} more objects</div>
            {% endif %}
        </div>
        <div class="object-count">Total: {{ objects|length }} objects</div>
    </div>
    {% endfor %}
</div>

<script>
const realms = {{ realms|tojson }};

document.getElementById('searchInput').addEventListener('keyup', function(e) {
    const query = e.target.value.toLowerCase();
    const cards = document.querySelectorAll('.realm-card');
    
    cards.forEach(card => {
        const text = card.innerText.toLowerCase();
        card.style.display = text.includes(query) ? '' : 'none';
    });
});
</script>
{% endblock %}
