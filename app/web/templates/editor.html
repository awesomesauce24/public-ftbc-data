<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FTBC Wiki Editor</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>‚úèÔ∏è Wiki Object Editor</h1>
            <p>Create and manage FTBC object pages</p>
        </header>

        <main>
            <div id="status" class="status-message"></div>

            <div class="editor-container">
                <div class="editor-form">
                    <!-- Realm Selection -->
                    <div class="form-group">
                        <label for="realm">Realm *</label>
                        <select id="realm" onchange="loadObjects()">
                            <option value="">Select a realm...</option>
                        </select>
                    </div>

                    <!-- Object Selection with Search -->
                    <div class="form-group">
                        <label for="objectSearch">Search Objects</label>
                        <input type="text" id="objectSearch" placeholder="Type to search by name...">
                    </div>

                    <div class="form-group">
                        <label for="object">Object *</label>
                        <select id="object" onchange="loadObject()">
                            <option value="">Select an object...</option>
                        </select>
                    </div>

                    <!-- Object Details Form -->
                    <div class="form-group">
                        <label for="objectName">Object Name</label>
                        <input type="text" id="objectName" placeholder="Name of the object">
                    </div>

                    <div class="form-group">
                        <label for="difficulty">Difficulty *</label>
                        <select id="difficulty">
                            <option value="Common">Common</option>
                            <option value="Uncommon">Uncommon</option>
                            <option value="Uncommon+">Uncommon+</option>
                            <option value="Medium">Medium</option>
                            <option value="Medium+">Medium+</option>
                            <option value="Hard">Hard</option>
                            <option value="Hard+">Hard+</option>
                            <option value="Harder">Harder</option>
                            <option value="Harder+">Harder+</option>
                            <option value="Very Hard">Very Hard</option>
                            <option value="Very Hard+">Very Hard+</option>
                            <option value="Deadly">Deadly</option>
                            <option value="Dreadful">Dreadful</option>
                            <option value="Dreadful+">Dreadful+</option>
                            <option value="Insane">Insane</option>
                            <option value="Impossible">Impossible</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="area">Area / Subrealm</label>
                        <input type="text" id="area" placeholder="e.g., Goiky, Lights Out, Abandonment">
                    </div>

                    <div class="form-group">
                        <label for="hint">Hint (Optional)</label>
                        <input type="text" id="hint" placeholder="Clue for finding the object">
                    </div>

                    <div class="form-group">
                        <label for="info">Information</label>
                        <textarea id="info" placeholder="Describe the object, its appearance, properties, etc."></textarea>
                    </div>

                    <div class="form-group">
                        <label for="obtaining">How to Obtain</label>
                        <textarea id="obtaining" placeholder="Step-by-step instructions for obtaining this object"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="image">Image Filename</label>
                        <input type="text" id="image" placeholder="e.g., Object_Name.png">
                    </div>

                    <div class="form-group">
                        <label for="oldImage">Old Image (Optional)</label>
                        <input type="text" id="oldImage" placeholder="Previous version of the image (if changed)">
                    </div>

                    <div class="form-group">
                        <label for="previousDifficulties">Previous Difficulties (Optional)</label>
                        <input type="text" id="previousDifficulties" placeholder="e.g., Hard, Medium+, Uncommon">
                    </div>

                    <!-- Action Buttons -->
                    <div class="button-group">
                        <button class="btn btn-primary" onclick="generateMarkup()">üëÅÔ∏è Generate Preview</button>
                        <button class="btn btn-secondary" onclick="copyMarkup()">üìã Copy Markup</button>
                        <button class="btn btn-secondary" onclick="savePage()">üíæ Save Locally</button>
                        <button class="btn btn-secondary" onclick="downloadMarkup()">‚¨áÔ∏è Download</button>
                    </div>

                    <hr style="margin: 20px 0; border: none; border-top: 2px solid #ddd;">

                    <div class="button-group">
                        <button class="btn btn-primary" onclick="publishToWiki()">üåê Publish to Wiki</button>
                    </div>
                </div>

                <!-- Preview Pane -->
                <div class="preview-pane">
                    <div class="preview-header">üìÑ Wiki Markup Preview</div>
                    <div id="preview" class="preview-box">
                        <p style="color: #999; margin: 0;">Select an object to generate preview...</p>
                    </div>
                    
                    <div class="info-box" style="margin-top: 20px;">
                        <h4>üí° Tips</h4>
                        <ul style="margin-left: 20px; color: #666; font-size: 0.9em;">
                            <li>Use Ctrl+S to save quickly</li>
                            <li>Use Ctrl+P to generate preview</li>
                            <li>Preview auto-updates when you change fields</li>
                            <li>Copy markup to paste manually or save locally first</li>
                        </ul>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <p>FTBC Wiki Editor | Need help? Check the <a href="/">documentation</a></p>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='js/editor.js') }}"></script>
</body>
</html>
